<!DOCTYPE html>
<html>
<head>
<title>Уведомления</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<style>

    h3{
        text-align:center;
    }
    table{
        margin: auto;
        text-align:center;
        border-collapse: collapse;
    }
    .train{
        padding-left: 15px;
        padding-right: 5px;
    }
    .time{
        font-size: 1.5em;
    }
    .space{
        width:50%;
    }
    .red{
        color:red;
    }
    .route{
        padding-right: 20px;
        white-space: nowrap;
    }
    .green{
        color:green;
    }
    .past{
        color:gray;
    }

    .active{

    }
    .active.red{
        background-color: red;
        border:1px solid red;
        color: white;

    }
    .active.green{
        background-color: green;
        border:1px solid green;
        color: white;
    }

</style>
    
</head>
<body>
<h3>Cтанция "Выборг"</h3>
<table>
<tr class="green"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">00:32</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">05:00</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">06:16</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">06:57</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">08:56</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">09:10</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">09:22</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">09:52</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">10:45</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">11:49</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">11:57</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">12:54</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">13:35</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">13:59</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">15:05</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">15:22</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">15:33</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">16:31</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">16:55</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">17:05</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">17:23</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">18:01</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">18:40</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">19:30</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">19:38</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">20:44</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    Вбг&#10142<b><u>СПб</u></b></td><td class="time">20:50</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">21:06</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="red"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">21:57</td>    <td class="train">Ласточка</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">22:49</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
<tr class="green"><td class="space">    </td><td class="route">    <b><u>СПб</u></b>&#10142Вбг</td><td class="time">22:58</td>    <td class="train">Пригородный</td>    <td class="space"></td></tr>
</table>
</body>
<script>
let l=[32,500,616,657,856,910,922,952,1045,1149,1157,1254,1335,1359,1505,1522,1533,1631,1655,1705,1723,1801,1840,1930,1938,2044,2050,2106,2157,2249,2258];
    let noticTime=15; // в минутах
    let soundTime=3;
    let table=document.querySelector('tbody').children;
    let date = new Date();
    let time = date.getHours()*100+date.getMinutes();
    let i;
    let activeList=[];
    for(i=0; i<l.length; i++){
        if(l[i]<time){
            table[i].classList.add('past');
        }else{
            if(l[i]<(time+noticTime)){
                    table[i].classList.add('active');
                    activeList.push([l[i],i]);
                }else if(activeList.length==0){
                    table[i].classList.add('active');
                    activeList.push([l[i],i]);
                    i++
                    break;
                }else{
                    i++;
                    break;
                }
        }
    }

    function f(){
        date = new Date();
        time = date.getHours()*100+date.getMinutes();
        if(time==0){
            clearTimeout(timerId);
        }
        if (activeList[0][0]<time){
            table[activeList[0][1]].classList.remove('active');
            table[activeList[0][1]].classList.add('past');
            activeList.splice(0,1);
            if(activeList.length==0){
                activeList.push([l[i],i]);
                table[i].classList.add('active');
                i++;
            }
        }
        if(l[i]<(time+noticTime)){
            activeList.push([l[i],i]);
            table[i].classList.add('active');
            i++;
        }
    }
    let timerId=setInterval(f,50000);

</script>
</html>
